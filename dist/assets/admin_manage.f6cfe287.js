import{d as D,o as f,q as v,b as t,k as b,O as I,_ as S,r as c,c as C,w as r,D as E,e as $,t as w,P as N,C as H,L as M,j as F,F as z,m as T,K as j,a as B,M as q,E as G}from"./index.646f21f3.js";import{b as U,d as J}from"./corporation.3b4704f6.js";import{s as K,h as L}from"./loading.d1a539ab.js";import{g as Q}from"./department.26115cce.js";var V=D({name:"Delete"});const R={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},W=t("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"},null,-1);function X(e,a,n,u,i,d){return f(),v("svg",R,[W])}V.render=X;V.__file="packages/components/Delete.vue";var Y=V,k=D({name:"Plus"});const Z={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},x=t("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1);function ee(e,a,n,u,i,d){return f(),v("svg",Z,[x])}k.render=ee;k.__file="packages/components/Plus.vue";var ae=k,A=D({name:"Search"});const te={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},oe=t("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1);function le(e,a,n,u,i,d){return f(),v("svg",te,[oe])}A.render=le;A.__file="packages/components/Search.vue";var ne=A;const re=D({props:{data:{type:Array,default:()=>[]},select:{type:Array,default:()=>[]},showIndex:{type:Boolean,default:!1},showSelection:{type:Boolean,default:!1},showPage:{type:Boolean,default:!0},page:{type:Object,default:()=>({index:1,size:20,total:0})},pageLayout:{type:String,default:"total, sizes, prev, pager, next, jumper"},pageSizes:{type:Array,default:[10,20,50,100]}},setup(e,a){const n=b(null);let u=null;const i=o=>{u?e.page.index=1:(e.page.index=o,a.emit("getTableData"))},d=o=>{u="work",setTimeout(()=>{u=null},100),e.page.size=o,a.emit("getTableData",!0)},p=o=>{a.emit("selection-change",o)};return I(()=>{n.value.doLayout()}),{table:n,handleCurrentChange:i,handleSizeChange:d,handleSelectionChange:p}}}),se={class:"system-table-box"};function ue(e,a,n,u,i,d){const p=c("el-table-column"),o=c("el-table");return f(),C("div",se,[t(o,H(e.$attrs,{ref:"table",class:"system-table",border:"",height:"100%",data:e.data,onSelectionChange:e.handleSelectionChange}),{default:r(()=>[e.showSelection?(f(),v(p,{key:0,type:"selection",align:"center",width:"50"})):E("",!0),e.showIndex?(f(),v(p,{key:1,label:"\u5E8F\u53F7",width:"60",align:"center"},{default:r(h=>[$(w((e.page.index-1)*e.page.size+h.$index+1),1)]),_:1})):E("",!0),N(e.$slots,"default",{},void 0,!0)]),_:3},16,["data","onSelectionChange"])])}var ie=S(re,[["render",ue],["__scopeId","data-v-00119cfc"]]);let O=[{value:1,label:"\u8FD0\u52A8"},{value:2,label:"\u5065\u8EAB"},{value:3,label:"\u8DD1\u9177"},{value:7,label:"\u8857\u821E"}];const de=[{value:1,label:"\u7BA1\u7406\u5458"},{value:2,label:"\u5F85\u5BA1\u6279\u7BA1\u7406\u5458"}],pe=D({components:{Layer:M},props:{layer:{type:Object,default:()=>({show:!1,title:"",showButton:!0})}},setup(e,a){const n=b(null),u=b(null);let i=b({name:"",choose:"",radio:"",number:""}),d=F([{}]);const p={staff_id:[{required:!0,message:"\u8BF7\u8F93\u5165\u7BA1\u7406\u5458\u5DE5\u53F7",trigger:"blur"}],choose:[{required:!0,message:"\u8BF7\u9009\u62E9",trigger:"blur"}],radio:[{required:!0,message:"\u8BF7\u9009\u62E9",trigger:"blur"}]};o();function o(){e.layer.row&&(i.value=JSON.parse(JSON.stringify(e.layer.row)))}return(y=>{K(),Q().then(g=>{console.log(g);let m=[];for(const l in g.data){if(!g.data.hasOwnProperty(l))continue;const _={label:g.data[l].name,value:g.data[l].id};m.push(_)}d=m,console.log(d),console.log(typeof d),console.log(O),console.log(typeof O)}).catch(g=>{L()}).finally(()=>{L()})})(),{form:i,rules:p,layerDom:u,ruleForm:n,selectData:d,radioData:de}},methods:{submit(){this.ruleForm&&this.ruleForm.validate(e=>{if(e){let a=this.form;this.layer.row?this.updateForm(a):this.addForm(a)}else return!1})},addForm(e){},updateForm(e){}}});function ce(e,a,n,u,i,d){const p=c("el-input"),o=c("el-form-item"),h=c("el-option"),y=c("el-select"),g=c("el-radio"),m=c("el-radio-group"),l=c("el-form"),_=c("Layer",!0);return f(),v(_,{layer:e.layer,onConfirm:e.submit,ref:"layerDom"},{default:r(()=>[t(l,{model:e.form,rules:e.rules,ref:"ruleForm","label-width":"120px",style:{"margin-right":"30px"}},{default:r(()=>[t(o,{label:"\u7BA1\u7406\u5458\u5DE5\u53F7\uFF1A",prop:"staff_id"},{default:r(()=>[t(p,{modelValue:e.form.staff_id,"onUpdate:modelValue":a[0]||(a[0]=s=>e.form.staff_id=s),placeholder:"\u8BF7\u8F93\u5165\u5DE5\u53F7"},null,8,["modelValue"])]),_:1}),t(o,{label:"\u6240\u5C5E\u90E8\u95E8\uFF1A",prop:"select"},{default:r(()=>[t(y,{modelValue:e.form.choose,"onUpdate:modelValue":a[1]||(a[1]=s=>e.form.choose=s),placeholder:"\u8BF7\u9009\u62E9",clearable:""},{default:r(()=>[(f(!0),C(z,null,T(e.selectData,s=>(f(),v(h,{key:s.id,label:s.name,value:s.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(o,{label:"\u7C7B\u578B\uFF1A",prop:"radio"},{default:r(()=>[t(m,{modelValue:e.form.radio,"onUpdate:modelValue":a[2]||(a[2]=s=>e.form.radio=s)},{default:r(()=>[(f(!0),C(z,null,T(e.radioData,s=>(f(),v(g,{key:s.value,label:s.value},{default:r(()=>[$(w(s.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["layer","onConfirm"])}var me=S(pe,[["render",ce]]);const fe=D({name:"crudTable",components:{Table:ie,Layer:me},setup(){const e=F({input:""}),a=F({show:!1,title:"\u65B0\u589E",showButton:!0}),n=F({index:1,size:20,total:0}),u=b(!0),i=b([]),d=b([]),p=m=>{d.value=m},o=m=>{u.value=!0,m&&(n.index=1),{page:n.index,pageSize:n.size,...e},U().then(l=>{l.data.list;let _=[];for(const s in l.data.list){if(!l.data.list.hasOwnProperty(s))continue;const P=l.data.list[s];_.push(P)}i.value=_,n.total=Number(l.data.pager.total)}).catch(l=>{i.value=[],n.index=1,n.total=0}).finally(()=>{u.value=!1})},h=m=>{let l={ids:m.map(_=>_.id).join(",")};J(l).then(_=>{G({type:"success",message:"\u5220\u9664\u6210\u529F"}),o(i.value.length===1)})},y=()=>{a.title="\u65B0\u589E\u7BA1\u7406\u5458",a.show=!0,delete a.row},g=m=>{a.title="\u7F16\u8F91\u6570\u636E",a.row=m,a.show=!0};return o(!0),{Plus:ae,Search:ne,Delete:Y,query:e,tableData:i,chooseData:d,loading:u,page:n,layer:a,handleSelectionChange:p,handleAdd:y,handleEdit:g,handleDel:h,getTableData:o}}}),ge={class:"layout-container"},he={class:"layout-container-form flex space-between"},_e={class:"layout-container-form-handle"},ve={class:"layout-container-table"};function be(e,a,n,u,i,d){const p=c("el-button"),o=c("el-popconfirm"),h=c("el-table-column"),y=c("Table"),g=c("Layer"),m=j("loading");return f(),C("div",ge,[B("div",he,[B("div",_e,[t(p,{type:"primary",icon:e.Plus,onClick:e.handleAdd},{default:r(()=>[$(w(e.$t("message.common.add")),1)]),_:1},8,["icon","onClick"]),t(o,{title:e.$t("message.common.delTip"),onConfirm:a[0]||(a[0]=l=>e.handleDel(e.chooseData))},{reference:r(()=>[t(p,{type:"danger",icon:e.Delete,disabled:e.chooseData.length===0},{default:r(()=>[$(w(e.$t("message.common.delBat")),1)]),_:1},8,["icon","disabled"])]),_:1},8,["title"])])]),B("div",ve,[q((f(),v(y,{ref:"table",page:e.page,"onUpdate:page":a[1]||(a[1]=l=>e.page=l),showIndex:!0,showSelection:!0,data:e.tableData,onGetTableData:e.getTableData,onSelectionChange:e.handleSelectionChange},{default:r(()=>[t(h,{prop:"staff_id",label:"\u5DE5\u53F7",align:"center"}),t(h,{prop:"type_name",label:"\u7C7B\u578B",align:"center"}),t(h,{prop:"department_name",label:"\u90E8\u95E8\u6240\u5C5E",align:"center"}),t(h,{label:e.$t("message.common.handle"),align:"center",fixed:"right",width:"200"},{default:r(l=>[t(p,{onClick:_=>e.handleEdit(l.row)},{default:r(()=>[$(w(e.$t("message.common.update")),1)]),_:2},1032,["onClick"]),t(o,{title:e.$t("message.common.delTip"),onConfirm:_=>e.handleDel([l.row])},{reference:r(()=>[t(p,{type:"danger"},{default:r(()=>[$(w(e.$t("message.common.del")),1)]),_:1})]),_:2},1032,["title","onConfirm"])]),_:1},8,["label"])]),_:1},8,["page","data","onGetTableData","onSelectionChange"])),[[m,e.loading]]),e.layer.show?(f(),v(g,{key:0,layer:e.layer,onGetTableData:e.getTableData},null,8,["layer","onGetTableData"])):E("",!0)])])}var Fe=S(fe,[["render",be]]);export{Fe as default};

import{_ as b,d as k,h as V,u as F,i as T,j as $,k as B,s as D,l as S,o as y,c as v,a as t,t as m,b as l,w as r,n as z,F as A,m as L,e as C,R as j,E as u,r as i,q as I,p as N,f as P}from"./index.1f585e31.js";import{g as R}from"./department.1385369b.js";var U="./assets/left.167ce885.jpg";const q=k({setup(){const e=V();F(),T();const s=$({staff_id:"1112",password:"123456",loading:!1,loading_register:!1,name:"\u8BF7\u9009\u62E9\u90E8\u95E8",departmentList:[""]});function _(){R().then(o=>{console.log(o);let n=[];for(const p in o.data){if(!o.data.hasOwnProperty(p))continue;const c=o.data[p].name;n.push(c)}console.log(n),console.log(typeof n),s.departmentList=n})}_();const d=B("password"),w=()=>{d.value===""?d.value="password":d.value=""},g=()=>new Promise((o,n)=>{if(s.staff_id===""){u.warning({message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A",type:"warning"});return}if(s.password===""){u.warning({message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A",type:"warning"});return}if(s.name==="\u8BF7\u9009\u62E9\u90E8\u95E8"){u.warning({message:"\u8BF7\u9009\u62E9\u90E8\u95E8",type:"warning"});return}o(!0)});return{loginLeftPng:U,systemTitle:D,systemSubTitle:S,form:s,passwordType:d,passwordTypeChange:w,submit:()=>{g().then(()=>{s.loading=!0;let o={staff_id:s.staff_id,password:s.password};e.dispatch("user/login",o).then(async()=>{u.success({message:"\u767B\u5F55\u6210\u529F",type:"success",showClose:!0,duration:1e3}),location.reload()}).finally(()=>{s.loading=!1})})},register:()=>{g().then(()=>{s.loading=!0;let o={staff_id:s.staff_id,password:s.password,department_name:s.name};j(o).then(n=>{u({type:"success",message:"\u6CE8\u518C\u6210\u529F"}),location.reload()}).finally(()=>{s.loading=!1})})}}}}),E=e=>(N("data-v-5e320b8b"),e=e(),P(),e),M={class:"container"},O={class:"box"},G={class:"login-content-left"},H=["src"],J={class:"login-content-left-mask"},K={class:"box-inner"},Q=E(()=>t("i",{class:"sfont system-xingmingyonghumingnicheng"},null,-1)),W=E(()=>t("i",{class:"sfont system-mima"},null,-1)),X={style:{display:"flex"}},Y={class:"fixed-top-right"};function Z(e,s,_,d,w,g){const f=i("el-input"),h=i("el-option"),o=i("el-select"),n=i("el-button"),p=i("el-form"),c=i("select-lang");return y(),v("div",M,[t("div",O,[t("div",G,[t("img",{src:e.loginLeftPng},null,8,H),t("div",J,[t("div",null,m(e.$t(e.systemTitle)),1),t("div",null,m(e.$t(e.systemSubTitle)),1)])]),t("div",K,[t("h1",null,m(e.$t("message.system.welcome")),1),l(p,{class:"form"},{default:r(()=>[l(f,{size:"large",modelValue:e.form.staff_id,"onUpdate:modelValue":s[0]||(s[0]=a=>e.form.staff_id=a),placeholder:e.$t("message.system.userName"),type:"text",maxlength:"50"},{prepend:r(()=>[Q]),_:1},8,["modelValue","placeholder"]),l(f,{size:"large",ref:"password",modelValue:e.form.password,"onUpdate:modelValue":s[2]||(s[2]=a=>e.form.password=a),type:e.passwordType,placeholder:e.$t("message.system.password"),name:"password",maxlength:"50"},{prepend:r(()=>[W]),append:r(()=>[t("i",{class:z(["sfont password-icon",e.passwordType?"system-yanjing-guan":"system-yanjing"]),onClick:s[1]||(s[1]=(...a)=>e.passwordTypeChange&&e.passwordTypeChange(...a))},null,2)]),_:1},8,["modelValue","type","placeholder"]),l(o,{modelValue:e.form.name,"onUpdate:modelValue":s[3]||(s[3]=a=>e.form.name=a),size:"large",type:"text",maxlength:"150",style:{width:"100%"}},{default:r(()=>[(y(!0),v(A,null,L(e.form.departmentList,a=>(y(),I(h,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t("div",X,[l(n,{type:"primary",loading:e.form.loading,onClick:e.submit,style:{width:"100%","margin-top":"20px"},size:"medium"},{default:r(()=>[C(m(e.$t("message.system.login")),1)]),_:1},8,["loading","onClick"]),l(n,{type:"primary",loading:e.form.loading_register,onClick:e.register,style:{width:"100%","margin-top":"20px","margin-left":"10px"},size:"medium"},{default:r(()=>[C(" \u6CE8\u518C ")]),_:1},8,["loading","onClick"])])]),_:1}),t("div",Y,[l(c)])])])])}var se=b(q,[["render",Z],["__scopeId","data-v-5e320b8b"]]);export{se as default};
